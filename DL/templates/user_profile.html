{% extends 'base.html' %}

{% block title %}Tài khoản{% endblock %}

{% block content %}
<div class="profile-layout">
    <aside class="profile-card">
        <div class="avatar">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <circle cx="12" cy="8" r="4" stroke="#555" stroke-width="1.5"/>
                <path d="M4 20a8 8 0 0 1 16 0" stroke="#555" stroke-width="1.5"/>
            </svg>
        </div>
        <h3>{{ user.name }}</h3>
        <ul class="stats">
            <li>Số lượt mượn sách: {{ user.borrow_count }}</li>
            <li>Sách chờ duyệt: {{ user.pending_books }}</li>
        </ul>
    </aside>

    <section class="profile-forms">
        <div class="panel">
            <h3>Hồ sơ cá nhân</h3>
            <form class="form-grid" method="post" action="{{ url_for('user.update_profile') }}">
                <label>Họ và tên</label><input class="form-control" type="text" name="full_name" value="{{ user.name }}">
                <label>SDT</label><input    class="form-control"
                type="text"
                name="phone_number"
                value="{{ user.phone_number }}"
                pattern="0\d{9,10}"
                title="Số điện thoại phải bắt đầu bằng 0 và có 10 hoặc 11 chữ số"
                required>
                <label>Giới tính</label>
                <div class="gender">
                    <div class="form-check me-3">
                        <input class="form-check-input" type="radio" name="gender" id="g1" value="Nam" {% if user.gender == 'Nam' %}checked{% endif %}>
                        <label class="form-check-label" for="g1">Nam</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="gender" id="g2" value="Nữ" {% if user.gender == 'Nữ' %}checked{% endif %}>
                        <label class="form-check-label" for="g2">Nữ</label>
                    </div>
                </div>
                <label>Email</label><input class="form-control" type="email" name="email" value="{{ user.email }}">
                <div class="form-actions-left">
                    <button class="btn btn-danger" type="submit"><i class="fa-regular fa-floppy-disk me-1"></i> Cập nhật thông tin</button>
                </div>
            </form>
        </div>

        <div class="panel">
            <h3>Đổi mật khẩu</h3>
            <form class="form-grid" method="post" action="{{ url_for('user.update_password') }}">
                <label>Tên tài khoản</label><input class="form-control-plaintext" type="text" value="{{ user.username }}" readonly tabindex="-1">
                <label>Mật khẩu cũ</label><input class="form-control" type="password" name="current_password">
                <label>Mật khẩu mới</label><input class="form-control" type="password" name="new_password">
                <label>Xác nhận mật khẩu</label><input class="form-control" type="password" name="confirm_password">
                <div class="form-actions">
                    <button class="btn btn-danger" type="submit"><i class="fa-solid fa-check me-1"></i> Xác nhận</button>
                </div>
            </form>
        </div>
    </section>
</div>
{% endblock %}
